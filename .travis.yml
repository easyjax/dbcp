# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax && find ~/.m2/repository -name '*SNAPSHOT*' -type d -exec rm -rf '{}' \; || true
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -e -U -DskipRTests -DrepoToken=$REPO_TOKEN clean deploy -P javadoc,report,deploy;
  else
    mvn -e -U -DskipRTests clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: JGucdvDrqX71AUlrwbenRoGM1Ox/lgkFpOz9yR1CPs3qwLRsXTPtbXW9+VvGah33NzI4ny76b1UYEIR2M1UvIM1Kebba/Mve+orgaubF9QJrKkB3D1pFEWdax4s0Jz188vERw6NYxhEnoALwxFqhliivgVkhga0LSSlf+mCYRRXRXgjt1pdd66eR7xErgCf7S5729jJ6L4n1NzG7TtsqBvmWdhHds5dytlR+CpLAX+DS12T30OYd72WUk+JkKCQFAuoAEuBiRZaOUONxqumAX5ZEG4c1cgaqHbxrfobkm5PewPkTdZHq2DPNumiVWJuKzcdOMEQUUDw0T9B6dwcnORIIXRtbmZyzx/g9BG3H63hU8Hk60EYoOxaAYD+41eyyAkkkqi4GC3Hx3U534qId6+NauUSHyCVLVNW1GNo1b/9cDf4n4/4vPN2pVvwQ7/7NxrR8QT5KFnks2Y/wPiIe2CawDSfKqXVNVrEAURDqlwo5RkgDIj8BXXzfXgU6ctGgYLqiOuhyhnUjTvP+HRJPhHhY7Sqm+jQkFV6h83DGgiRKj1cPYMBLIziVU6cuwsysAZUQWVwM9ECUXgwsHHIz/xlhHZkS6CKgFzmoXZeot7q3D/TZHrEFEcvceHAs0GpRlgQIUrPgq+pDL+5WjaQdwjnyUvI0F6uqFQRbbxbefKA=
  - secure: jEqGiDxVF78DHL5+siCP1Yxgyxb4kENvivkiDLnnI2h7huxy71FIU8jERdqe5JMZdQEVcXCQtr8x0Y4pZ1245V6oZ5ZTHyboSthL1sBYxThIbxJDvwEkWSqOKZxuvLGD/+ecDgvHCLQMk9HcWqF4na2VmyHFSsyM6IcQ4lxQH0R85xjl+T6VxU5L9o7u5IQ0Aiv43SkjAOO+gbihXqIBz6C/41/AUk2DqYB+/AZpc04CcR/eksLhI7xpy/jquQGbVN0cvdodCrRFIccKyUIturcSgOs5YOACNpgOV17hezT9Na+70Y8xm75Go9NGVe6QIGI5dOmg6hC5TSAyP6mzPSvurufyVjaYoNfpPXgyS8tlZBiLqli6jUVumRX+QMv4/OYdYYkTcIT5M1KhvH02E7EmQBZaS2xp0HrjEuIxUubtXDNIo+NZ+eeR9xJjDtmIHdGTRlyHJ45BkuUE8uU/n5irMUX4l7t63uioCMwSzpB//RU/ebdp9il1c4fBCJtQ0ZThPP/AivjBp99I5tEvm+L+/7CtiSIT3odYTMvm018jb9213p6x1O4Lvf4S5ytiusNthETdJb2g6UK1HWb8USpwXjOAcJMfoF3lIBNnh98gSrRwG2ILOtPg0WhUlXuUwwbkunO5XHPtlLpEwLEECX/Fxm+8yw2P88eu4pQu/pk=
  - secure: GsBaJV/YtbMoThV2JpqQ9GaMEN/rTKRzn5NJ5Yb5qrVkbahsIR9kEFrv0gHxBxoBLtMJrCjk2dgYf+s0x5CH/vNaUHoiZsdFI7za44HjhumC8wiqI5FJ1jPl1Y2kuDuvQAJCc071yy3IavxiVLZ9UzD+WA6RqLdq6eFITCyN4KTABLWsso7VvsyS8l59POUkO/vyOH0HiQ7Zw2Y60qCAQZAjtARBNHNrkTF7mxfUyWX0n99ey5UQRKold/Rf4FC3ZfB7U447Pyvr300mL6CW6Dp08YtJBIDsty3bSDYt4wnFtYg2S/u1JLhgXD9sOzVa02Nn/NVKBQStcm8W41BRIBt242MFre5hXKWMSGjwQ/FsmCYbzCxh6whzpU12Vdny9cgA11gcXcRRfpRekZ8+RNi7JOtq5NFcucNgr4x9/zIp50OUsRsVLARIZ4O9CKkfKhJI+b0guGrtBnqBHjW8nkbiQaPjlV+VdKnRPSjAugEYK1RLGQcHFqQU2KwSIoXk1+EmIh9KcLTO12P/Pvwz75W4nZSdDGsBMw3jErsagj9FOGv7jSEXp0XuApLuYHh57gadTl05lhR3k7uKc52EppCOWEa5UrkzbY1KFFr2fgV3vW2IVgiL92NREORgUzEAADTouHhgZpHUHeDT++pO3e3Z1o2ezSwA9eSIeeP4jgQ=
  - secure: SmdLn/E0tve8eQOo0BJZg7NBWOmpZ/IFMO9bjT6IbVGqaBT/uG7zpgurE8ad0geDOru7AWFtl83t5a1UJBiO4SuV0N+8u+sVTZl7RGh7FI69NH7lYQkvO8coY5IBmVuKB31uDo2W+E/1vKIGGBt+j5h5B7ZuzFjTiWthQt3w+S+CP6hA4AGrs2RjcVSaXTt7gQ0C4O+d7dqyBCU9unF6R+YwD8f4sRhwvrzk1eOEnoq9mqt07CrxaXKkmj9l1ZWnIE17i9XJDACcmNxv48R9AEkGUily0GQK3FN+pNdr/KzV19d6Gizi4vTQZcdHfHYvH89GLGG1QS4jz7REDd2omMJjRAfOFBwYb7RXa6P7N9M12nuUd9YtR1qXV2wvoQm8+I9nOd3UH7rEeabQxP/J98OaxJWQdIAmaYlYeBexRj1bSoKamdLG0FBxqb1Da+ayRTO/+2YSAI2IHrQmxD5dQtKdrlcVeEir5xeTqPeGUn1a6kavfAR3JEggiF8QNO/VSjp5zaHCpzspkCLz/JMtTwT7qpxYa12m5YDiexpk6l66t7aace4XctR0k7u3MxKT6iNTnRnyfjEGFwzXGR5opFJ1xDRFUHp2drOvFAyw/MYmG/FOvPA0fREBNW961BtsH4xFkr42pOdxQTwb3vp+byxa/qiwHOA5vvTMRWaOyWo=
  - secure: koV2nVYU4lZQFNOzhYSOZ06uXIbLTUZ3Ock2zUJmm3Z1C+LnpvaLRiDVnVnQN/ppaHObtOP+Puu7ztozK8oCrtEf0urPZULnjmLWBlT0siMMyypHo91hOO0k5tBNYdm2w4yY9DlaOhroDReG7/ukbb5gUYjuniH/Bz5VQf6S5xp4h1DYIcV7xDQbGnrkqTQxCpb/se4dIFcLaLDLq+avcRnbuHIXrklW0beqHFZowO88XHGfajKCalTSOroG4eJZS4M0G/erDajrCbH0e+aWp712Znp2UWBYAXOeoVsMsFpOcvIb1SUY7rZm5kutNfpzMuAoODHfBaAxV3Ujtllk2om8jKRkbFfC5+1wT3ie0Fjf/zfzTRlRH7aLs1ReVrfkI0E5mFkewplZUPFN6rG4fjSHS09SmC8egrD5vA38VXTNqy4VMyLfRrYGNeGZ18GOvWFWT5I5ocyt5p6Anc+n2iJdi8FLzWL/QkDcsThtTABwktGtqikcii5yH3EuaiO4T+pYqHJbc3XK1A7Ab82HkYrkACPDlxXXHzvFsM0R8h7DQpyI41phwKmackBMoRL8DvmQOm1DK+qMseA4tluTnK9q6MoOrsqFKQpPxsRn37W3WRXcEEbGT9r13Wa6CP6ldV3Z6f4ynZDYM5nchq1XGQSRDGy0M7ufwnVgCFANrAw=
  - secure: eHk45lsTBuQ+kERPZEjDTo0OIEI5UBi1k+1Pg8c1XlQXbot/WQmGTRRimIfz8XMCFsqAG0QOxrRDPrJe72maEPsZGUDW3M3KERH2DAuUf9yxSvJY2dOd8n+Iz48T4VwZU2PPT39VpZieTsJXp+D8QzMp8Cxoehs7QYuNStL3vBZOyl+R8VNKVx+Y08M4eMibCPcIdTIu9gO0NHzmuHS4n2X+WaHwdQvRugAoweDVUukORfEUa1jkCziJMmHcA9P3iVpdxwWr37si/yEj4avzM+kOUDQ4o/74KFMz68qVTGD3g0ZdueGmaoNHE7QZ3yh5J7OwdXXvJEOj+67Mo06mxY8i8YbZE4iKtuxl6nggtyD0baMP1kC6tQajQ96JCGN9Q2ueYO23STMib6iBnicuatAelVgNKqJXzVGPHU2o/3mFdXXZZ8E9U25HwiDBAQhiOiy55iLWAMVRecU9s54SUwwXsmCQz99iuD2GriZjCS5TbbqiAJRkF4nxlaH4RozdikyFMhFJ0xuk6L3C2zIRvtk6NH59JSrW9a5Tej/fHeZrLUiOjcK8Dj94aMoA9hCu9o8bsjXq86MVYOwttsUkBYty2fkohFtppr8UMZMfLOsNAaWqvlB45h5er0PkgUQhmV+IuCcWFcNdZXjfv2riYvY3yPUriUPS4CdJe/3Khjc=
  - secure: kNnT+1KZg4vLs9W7bQKjTHBLvu0h+SRsAlXIvxo3ejS7CMZF9Uqi9Xab7U1aOzlo6DmMbPVofwl12TTyB4dkYLNcPX3GrL41qaZLaOudVKxAuzk11mZRvBiAqMC1lWPnZUauYwwqLMw+kCCJ09o285R8HEyBACLrw7X7nTpfk7FnzAifuC4+h0Mtsk0YRPSCOirh2irEdMTyFmS+kweVFAoOeR6MdleJjQJqSnoyBmm2MTwmt3mkFNgza8z2nUem8JojFp7b71hcjeSbzpMaHq4kboEvMf5zFEhgjz3RIt1euuHZE9Ia2WloCnqUXpcQaqtD2UKzL9BtCy1xGlPZoUVoprcvQtbqEEVQrSap0t0pVR+WoN3MZt19ymE4NDarQX+Wb3Vtc7PUZCPmNdOXPsy/8OXdd+PUUxoMOwHgxP094eV5qH5Ysi9FBohIp2J+/IE4wKvkE9HXFFrWM+gmNeiolmSJYJgzFuOVRr0PY+Pul96fWJBSpLX3nGL6cLfEMIXhbJzekH9LFDSJQZ2KVaesw4DdnamyPOYF69Ke0oZRjgC6kCKRwYXY5cXztZYMF3FVQX5OEXfLs3f/SCxKs2lRVr+SpFnVWDbjOZhcCp1hKHYm7p8g9OTmcBf/L5/bDW0nkbNxB94QXwWjk8gYfievxXCghkypb4Ni7SYWuOU=
